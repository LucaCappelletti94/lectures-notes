\begin{luacode}
function fileExists(name)
   local f=io.open(name,"r")
   if f~=nil then io.close(f) return true else return false end
end

--[[We define 5 levels of recursive attempts]]
local levels = 10

--[[The expected file name is the following]]
local target = '/general/packages.tex'
deapness = '../'

for i=levels,1,-1 do
    --[[if we have a path that exists we exit]]
    if fileExists(deapness..target) then break end

    --[[We increase the path one level up]]
    deapness = '../'..deapness
end
\end{luacode}
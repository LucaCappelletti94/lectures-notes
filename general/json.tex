\begin{luacode}
--[[Require library for Lua library]]
require("lualibs.lua")

--[[Opens the two metadata file]]
local specificFile = io.open('metadata.json')
local folderFile = io.open('../metadata.json')
local genericFile = io.open('../../metadata.json')

--[[Reads the files]]
local specificJsonString = specificFile:read('*a')
local folderJsonString = specificFile:read('*a')
local generalJsonString = genericFile:read('*a')

--[[Closes the files]]
specificFile.close()
folderFile.close()
genericFile.close()

--[[Convert the Json strings in Lua dictionaries]]
local specific =  utilities.json.tolua(specificJsonString)
local folder =  utilities.json.tolua(folderJsonString)
local general =  utilities.json.tolua(generalJsonString)

metadata = {}

--[[Merge top layer of dictionaries, so that the specific one overrides the generic one.]]
for k,v in pairs(specific) do
   metadata[k] = v
end

for k,v in pairs(folder) do
   metadata[k] = v
end

for k,v in pairs(general) do
   metadata[k] = v
end
\end{luacode}